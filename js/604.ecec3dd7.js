(self["webpackChunkwikeeb"]=self["webpackChunkwikeeb"]||[]).push([[604],{8604:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>$});var t=l(3673),i=l(6686),o=l.n(i);const n=e=>((0,t.dD)("data-v-a0f00b58"),e=e(),(0,t.Cn)(),e),s=n((()=>(0,t._)("img",{id:"logo",src:o(),alt:""},null,-1))),d={key:0,class:"GL__toolbar-link q-ml-xs q-gutter-xl text-body2 text-weight-bold row items-center no-wrap"},u=(0,t.Uk)(" Explore "),c=(0,t.Uk)(" Keycaps "),m={class:"q-pl-sm q-gutter-sm row items-center no-wrap"},p=(0,t.Uk)(" Add a keycap set "),r=(0,t.Uk)("Keycaps"),y=(0,t.Uk)("Log out");function g(e,a,l,i,o,n){const g=(0,t.up)("router-link"),w=(0,t.up)("q-space"),k=(0,t.up)("q-btn"),L=(0,t.up)("q-icon"),M=(0,t.up)("q-item-section"),f=(0,t.up)("q-item"),I=(0,t.up)("q-list"),j=(0,t.up)("q-menu"),b=(0,t.up)("q-toolbar"),h=(0,t.up)("q-header"),C=(0,t.up)("router-view"),S=(0,t.up)("q-page-container"),x=(0,t.up)("q-layout");return(0,t.wg)(),(0,t.j4)(x,{view:"hHh lpR fFf"},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{elevated:"",class:"text-white navbar"},{default:(0,t.w5)((()=>[(0,t.Wm)(b,{class:"q-py-sm q-px-md"},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{to:{name:"explore"},class:"text-white"},{default:(0,t.w5)((()=>[s])),_:1}),e.$q.screen.gt.sm?((0,t.wg)(),(0,t.iD)("div",d,[(0,t.Wm)(g,{to:{name:"explore"},class:"text-white"},{default:(0,t.w5)((()=>[u])),_:1}),(0,t.Wm)(g,{to:{name:"keycaps"},class:"text-white"},{default:(0,t.w5)((()=>[c])),_:1})])):(0,t.kq)("",!0),(0,t.Wm)(w),(0,t._)("div",m,[(0,t.Wm)(k,{onClick:e.tryToAddKeyboard,color:"primary"},{default:(0,t.w5)((()=>[p])),_:1},8,["onClick"]),e.getAuthStatus?((0,t.wg)(),(0,t.j4)(k,{key:0,dense:"",flat:"","no-wrap":""},{default:(0,t.w5)((()=>[(0,t.Wm)(L,{name:"person",size:"30px"}),(0,t.Wm)(L,{name:"arrow_drop_down",size:"16px"}),(0,t.Wm)(j,{id:"user-menu","auto-close":""},{default:(0,t.w5)((()=>[(0,t.Wm)(I,null,{default:(0,t.w5)((()=>[(0,t.Wm)(f,{clickable:"",to:{name:"favorite-keycaps"},class:"GL__menu-link flex items-center row"},{default:(0,t.w5)((()=>[(0,t.Wm)(L,{name:"favorite",size:"16px",class:"q-mx-sm"}),(0,t.Wm)(M,null,{default:(0,t.w5)((()=>[r])),_:1})])),_:1}),(0,t.Wm)(f,{clickable:"",class:"GL__menu-link flex items-center flex row"},{default:(0,t.w5)((()=>[(0,t.Wm)(L,{name:"logout",size:"16px",color:"negative",class:"q-mx-sm"}),(0,t.Wm)(M,{onClick:e.logoutUser,class:"text-negative"},{default:(0,t.w5)((()=>[y])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1})):((0,t.wg)(),(0,t.j4)(k,{key:1,color:"primary",class:"log-button",dense:"",to:{name:"login"}},{default:(0,t.w5)((()=>[(0,t.Wm)(L,{name:"person",size:"25px"})])),_:1}))])])),_:1})])),_:1}),(0,t.Wm)(S,null,{default:(0,t.w5)((()=>[(0,t.Wm)(C)])),_:1})])),_:1})}var w=l(3617);const k=(0,t._)("span",{class:"text-h4 flex justify-center q-my-md"},"Submit a new keycap set",-1),L={class:"flex justify-center q-my-md"};function M(e,a,l,i,o,n){const s=(0,t.up)("q-input"),d=(0,t.up)("q-select"),u=(0,t.up)("q-file"),c=(0,t.up)("q-step"),m=(0,t.up)("q-icon"),p=(0,t.up)("q-btn"),r=(0,t.up)("q-stepper-navigation"),y=(0,t.up)("q-stepper"),g=(0,t.up)("q-form"),w=(0,t.up)("q-card-section"),M=(0,t.up)("q-card"),f=(0,t.up)("q-dialog");return(0,t.wg)(),(0,t.j4)(f,{ref:"dialog",onHide:n.onDialogHide},{default:(0,t.w5)((()=>[(0,t.Wm)(M,{style:{width:"700px","max-width":"80vw"},class:"q-dialog-plugin"},{default:(0,t.w5)((()=>[(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[k,(0,t.Wm)(g,{class:"q-gutter-md"},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{modelValue:i.step,"onUpdate:modelValue":a[10]||(a[10]=e=>i.step=e),ref:"stepper",color:"primary",animated:"",flat:"","alternative-labels":""},{navigation:(0,t.w5)((()=>[(0,t.Wm)(r,{class:"flex justify-end"},{default:(0,t.w5)((()=>[i.step>1?((0,t.wg)(),(0,t.j4)(p,{key:0,flat:"",color:"primary",onClick:a[8]||(a[8]=e=>n.previous()),label:"Back",class:"q-ml-sm"})):(0,t.kq)("",!0),(0,t.Wm)(p,{onClick:a[9]||(a[9]=e=>n.next()),color:"primary",label:2===i.step?"Finish":"Continue"},null,8,["label"])])),_:1})])),default:(0,t.w5)((()=>[(0,t.Wm)(c,{name:1,title:"Basic infos",icon:"settings",done:i.step>1},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{modelValue:o.keycapToAdd.name,"onUpdate:modelValue":a[0]||(a[0]=e=>o.keycapToAdd.name=e),label:"Name"},null,8,["modelValue"]),(0,t.Wm)(d,{modelValue:o.keycapToAdd.brand,"onUpdate:modelValue":a[1]||(a[1]=e=>o.keycapToAdd.brand=e),options:o.KeycapConfig.brand,label:"Brand"},null,8,["modelValue","options"]),(0,t.Wm)(d,{modelValue:o.keycapToAdd.profile,"onUpdate:modelValue":a[2]||(a[2]=e=>o.keycapToAdd.profile=e),options:o.KeycapConfig.profile,label:"Profile"},null,8,["modelValue","options"]),(0,t.Wm)(d,{modelValue:o.keycapToAdd.material,"onUpdate:modelValue":a[3]||(a[3]=e=>o.keycapToAdd.material=e),options:o.KeycapConfig.material,label:"Material"},null,8,["modelValue","options"]),(0,t.Wm)(d,{modelValue:o.keycapToAdd.compatibility,"onUpdate:modelValue":a[4]||(a[4]=e=>o.keycapToAdd.compatibility=e),options:o.KeycapConfig.compatibility,label:"Compatibility",multiple:""},null,8,["modelValue","options"]),(0,t.Wm)(d,{modelValue:o.keycapToAdd.availability,"onUpdate:modelValue":a[5]||(a[5]=e=>o.keycapToAdd.availability=e),options:o.KeycapConfig.availability,label:"Availability"},null,8,["modelValue","options"]),(0,t.Wm)(u,{modelValue:i.filesImages,"onUpdate:modelValue":a[6]||(a[6]=e=>i.filesImages=e),label:"Upload image",multiple:"",accept:".jpg, image/*",onRejected:i.onRejected},null,8,["modelValue","onRejected"])])),_:1},8,["done"]),(0,t.Wm)(c,{name:2,title:"More infos",icon:"create_new_folder",done:i.step>2},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(o.keycapToAdd.links,((e,a)=>((0,t.wg)(),(0,t.iD)("div",{key:a,class:"flex"},[(0,t.Wm)(d,{modelValue:o.keycapToAdd.links[a].prefix,"onUpdate:modelValue":e=>o.keycapToAdd.links[a].prefix=e,options:o.KeycapConfig.links,class:"q-mr-md"},{prepend:(0,t.w5)((()=>[(0,t.Wm)(m,{name:"language"})])),_:2},1032,["modelValue","onUpdate:modelValue","options"]),(0,t.Wm)(s,{class:"col",modelValue:o.keycapToAdd.links[a].link,"onUpdate:modelValue":e=>o.keycapToAdd.links[a].link=e,label:"URL"},null,8,["modelValue","onUpdate:modelValue"]),(0,t.Wm)(p,{rounded:"",flat:"",color:"primary",icon:"close",onClick:e=>n.removeLink(a)},null,8,["onClick"])])))),128)),(0,t._)("div",L,[(0,t.Wm)(p,{round:"",color:"primary",icon:"add",onClick:a[7]||(a[7]=e=>n.addLink())})])])),_:1},8,["done"])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["onHide"])}l(71),l(7965),l(6016);const f=JSON.parse('{"profile":["Cherry","OEM","SA","MT3","NP","DSA","XDA","KAT","KAM"],"material":["ABS","PBT","Aluminium","Brass"],"brand":["GMK","Signature Plastic","Keyreative","EnjoyPBT"],"availability":["IC","GB-Live","GB-Ended","In-stock","Sold out"],"compatibility":["ISO-UK","ANSI-US","ISO-FR","ISO-DE","ISO-CH"],"links":["GeekHack","Worldwide","US","EU","CA","UK","Asia","CN","JP","OCE"]}');var I=l(8825),j=l(1959),b=l(2396);const h={data(){return{KeycapConfig:f,keycapToAdd:{name:"",brand:"",profile:"",material:"",availability:[],compatibility:[],imgPath:"",links:[{prefix:"GeekHack",link:""}]}}},emits:["ok","hide"],setup(){const e=(0,I.Z)();return{step:(0,j.iH)(1),filesImages:(0,j.iH)(null),filesMaxSize:(0,j.iH)(null),filesMaxTotalSize:(0,j.iH)(null),filesMaxNumber:(0,j.iH)(null),onRejected(a){e.notify({type:"negative",message:`${a.length} file(s) did not pass validation constraints`})}}},methods:{next(){2==this.step?this.onOKClick():this.step++},addLink(){this.keycapToAdd.links.push({prefix:"",link:""})},removeLink(e){this.keycapToAdd.links.splice(e,1)},previous(){this.step--},show(){this.$refs.dialog.show()},hide(){this.$refs.dialog.hide()},onDialogHide(){this.$emit("hide")},onOKClick(){this.uploadImg(),this.$emit("ok"),this.hide()},onCancelClick(){this.hide()},uploadImg(){const e=1e3,a=500,l="image/jpeg",t=.7,i=URL.createObjectURL(this.filesImages[0]),o=new Image;o.src=i,o.onerror=function(){URL.revokeObjectURL(this.src),console.error("Cannot load image")},o.onload=()=>{URL.revokeObjectURL(this.src);const[i,n]=this.calculateSize(o,e,a),s=document.createElement("canvas");s.width=i,s.height=n;const d=s.getContext("2d");d.drawImage(o,0,0,i,n),s.toBlob((e=>{b.Z.putImageToStorage("keycaps/"+this.filesImages[0].name,e).then((e=>{this.keycapToAdd.image=e.metadata.fullPath,b.Z.pushItemToCollection("keycaps",this.keycapToAdd)})).catch((e=>{console.error(e)}))}),l,t)}},calculateSize(e,a,l){let t=e.width,i=e.height;return t>i?t>a&&(i=Math.round(i*a/t),t=a):i>l&&(t=Math.round(t*l/i),i=l),[t,i]}}};var C=l(4260),S=l(4390),x=l(151),T=l(5589),N=l(5269),W=l(3518),v=l(4340),A=l(4689),D=l(689),z=l(1052),U=l(4554),Q=l(8240),Z=l(118),O=l(7518),V=l.n(O);const _=(0,C.Z)(h,[["render",M]]),q=_;V()(h,"components",{QDialog:S.Z,QCard:x.Z,QCardSection:T.Z,QForm:N.Z,QStepper:W.Z,QStep:v.Z,QInput:A.Z,QSelect:D.Z,QFile:z.Z,QIcon:U.Z,QBtn:Q.Z,QStepperNavigation:Z.Z});const E=(0,t.aZ)({name:"MainLayout",computed:{...(0,w.Se)(["getAuthStatus"])},methods:{...(0,w.nv)(["logoutUser"]),tryToAddKeyboard(){this.getAuthStatus?this.addKeyboard():this.$router.push({name:"login"})}},setup(){const e=(0,I.Z)();function a(){e.dialog({component:q}).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))}return{addKeyboard:a}}});var H=l(3066),G=l(3812),B=l(9570),K=l(2025),P=l(6335),R=l(7011),Y=l(3414),J=l(2035),F=l(2652);const X=(0,C.Z)(E,[["render",g],["__scopeId","data-v-a0f00b58"]]),$=X;V()(E,"components",{QLayout:H.Z,QHeader:G.Z,QToolbar:B.Z,QSpace:K.Z,QBtn:Q.Z,QIcon:U.Z,QMenu:P.Z,QList:R.Z,QItem:Y.Z,QItemSection:J.Z,QPageContainer:F.Z})},6686:e=>{e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMywgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkNhbHF1ZV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKCSB2aWV3Qm94PSIwIDAgMTc1LjIgOTguOCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMTc1LjIgOTguODsiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPgoJLnN0MHtmaWxsOiNBNTkyRjI7fQoJLnN0MXtmaWxsOiM0MkNGQ0Y7fQo8L3N0eWxlPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNTEuNSw5NS4zQzQ3LDg3LjUsNDMsODEuMSwzOS44LDc0LjRjLTAuOS0xLjgsMC4xLTUuMiwxLjItNy4zYzEwLjYtMTguOCwyMS4zLTM3LjYsMzIuNS01NgoJYzEuNi0yLjcsNS44LTQuOSw5LjEtNS4zYzYuMi0wLjgsMTIuNi0wLjIsMjAuNy0wLjJDODUuOSwzNS44LDY5LjEsNjQuOCw1MS41LDk1LjN6Ii8+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik05Mi4yLDk1LjJjLTQuNC03LjQtOC4zLTEzLjUtMTEuNi0yMGMtMC45LTEuOS0wLjYtNS4zLDAuNS03LjJjMTAuNy0xOS4xLDIxLjYtMzguMiwzMi45LTU2LjkKCWMxLjYtMi43LDUuOC00LjgsOS4xLTUuMmM2LjItMC44LDEyLjUtMC4yLDIwLjctMC4yQzEyNi40LDM2LDEwOS42LDY1LjEsOTIuMiw5NS4yeiIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMzIuOSw2MEMyMi40LDQxLjgsMTIuNSwyNC42LDIuNiw3LjRDMTIuOCw5LDI0LjItMC4zLDMxLjUsMTEuMUM0OC40LDM3LjUsNDguMiwzNy43LDMyLjksNjB6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0xMzguNyw0MC41YzEwLjUsMTguMiwyMC40LDM1LjQsMzAuMyw1Mi42Yy0xMC4yLTEuNi0yMS42LDcuNy0yOC45LTMuN0MxMjMuMiw2MywxMjMuNCw2Mi44LDEzOC43LDQwLjV6Ii8+Cjwvc3ZnPgo="}}]);