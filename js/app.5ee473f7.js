(()=>{"use strict";var e={5979:(e,t,a)=>{a(5363),a(71);var r=a(8880),o=a(9592),s=a(3673);function n(e,t,a,r,o,n){const i=(0,s.up)("router-view");return(0,s.wg)(),(0,s.j4)(i)}var i=a(7286);const c=(0,s.aZ)({name:"App",mixins:[(0,i.Z)((function(){return{title:"Wikeeb | Keyboard wiki"}}))]});var l=a(4260);const d=(0,l.Z)(c,[["render",n]]),u=d;var p=a(8953),h=a(3340),f=a(9582);const y=[{name:"home",path:"/",component:()=>Promise.all([a.e(736),a.e(686)]).then(a.bind(a,5686)),children:[{name:"explore",path:"",component:()=>Promise.all([a.e(736),a.e(396)]).then(a.bind(a,9396))},{name:"keyboards",path:"/keyboards",component:()=>Promise.all([a.e(736),a.e(475)]).then(a.bind(a,3475))},{name:"keycaps",path:"/keycaps",component:()=>Promise.all([a.e(736),a.e(529)]).then(a.bind(a,5529))},{name:"keycaps-details",path:"/keycaps/:id",component:()=>Promise.all([a.e(736),a.e(985)]).then(a.bind(a,7985))},{name:"login",path:"/login",component:()=>Promise.all([a.e(736),a.e(996)]).then(a.bind(a,2996))},{name:"register",path:"/register",component:()=>Promise.all([a.e(736),a.e(380)]).then(a.bind(a,1380))},{name:"private",path:"/private",component:()=>Promise.all([a.e(736),a.e(577)]).then(a.bind(a,1577)),meta:{requiresAuth:!0}},{name:"favorite-keycaps",path:"/favorite-keycaps",component:()=>Promise.all([a.e(736),a.e(990)]).then(a.bind(a,7990)),meta:{requiresAuth:!0}}]},{path:"/:catchAll(.*)*",component:()=>Promise.all([a.e(736),a.e(400)]).then(a.bind(a,2400))}],m=y;var g=a(2396);const v=(0,h.BC)((function({store:e}){const t=f.PO,a=(0,f.p7)({scrollBehavior:()=>({left:0,top:0}),routes:m,history:t("/")});return a.beforeEach((async(t,a,r)=>{const{ensureAuthIsInitialized:o,isAuthenticated:s}=g.Z;await o(e);try{t.matched.some((e=>e.meta.requiresAuth))?s(e)?r():r("/"):r()}catch(n){console.log(n),r()}})),a}));async function b(e,t){const r="function"===typeof p["default"]?await(0,p["default"])({}):p["default"],{storeKey:s}=await Promise.resolve().then(a.bind(a,8953)),n="function"===typeof v?await v({store:r}):v;r.$router=n;const i=e(u);return i.use(o.Z,t),{app:i,store:r,storeKey:s,router:n}}var w=a(6249),K=a(6417),k=a(4379),Z=a(6443);const A={config:{brand:{primary:"#BD93F9",secondary:"#42CFCF",accent:"#9C27B0",dark:"#1B1B1B",positive:"hsl(153, 53%, 53%)",negative:"hsl(348, 86%, 61%)",info:"hsl(207, 61%, 53%)",warning:"hsl(14, 100%, 53%)","dark-page":"#161616"}},plugins:{Loading:w.Z,Notify:K.Z,Dialog:k.Z,Meta:Z.ZP}},P="/";async function U({app:e,router:t,store:a,storeKey:r},o){let s=!1;const n=e=>{try{return t.resolve(e).href}catch(a){}return Object(e)===e?null:e},i=e=>{if(s=!0,"string"===typeof e&&/^https?:\/\//.test(e))return void(window.location.href=e);const t=n(e);null!==t&&(window.location.href=t)},c=window.location.href.replace(window.location.origin,"");for(let d=0;!1===s&&d<o.length;d++)try{await o[d]({app:e,router:t,store:a,ssrContext:null,redirect:i,urlPath:c,publicPath:P})}catch(l){return l&&l.url?void i(l.url):void console.error("[Quasar] boot error:",l)}!0!==s&&(e.use(t),e.use(a,r),e.mount("#q-app"))}b(r.ri,A).then((e=>Promise.all([Promise.resolve().then(a.bind(a,2490)),Promise.resolve().then(a.bind(a,9979)),Promise.resolve().then(a.bind(a,7560)),Promise.resolve().then(a.bind(a,2683))]).then((t=>{const a=t.map((e=>e.default)).filter((e=>"function"===typeof e));U(e,a)}))))},9979:(e,t,a)=>{a.r(t),a.d(t,{default:()=>s});var r=a(3340),o=a(9058);const s=(0,r.xr)((async()=>{o.Z.set(!0)}))},2490:(e,t,a)=>{a.r(t),a.d(t,{default:()=>s});var r=a(3340),o=a(2396);const s=(0,r.xr)((async({app:e,router:t,store:a,Vue:r})=>{o.Z.fBInit({apiKey:"AIzaSyDyysto8thfS59V4sFwCdQlj9TvMwgT2ZA",authDomain:"dev-wikeeb.firebaseapp.com",projectId:"dev-wikeeb",storageBucket:"dev-wikeeb.appspot.com",messagingSenderId:"754337739134",appId:"1:754337739134:web:06e4fb61756c480ad8832f"}),o.Z.auth().onAuthStateChanged((e=>{o.Z.handleOnAuthStateChanged(a,e)}),(e=>{console.error(e)})),a.$fb=o.Z}))},2683:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});const r={logEvent(e,t,a,r=null){window.dataLayer.push({appEventCategory:e,appEventAction:t,appEventLabel:a,sessionId:r}),window.dataLayer.push({event:"appEvent"})},logPage(e,t,a=null){window.dataLayer.push({screenPath:e,screenName:t,sessionId:a}),window.dataLayer.push({event:"appScreenView"})}},o=({router:e})=>{e.afterEach(((e,t)=>{r.logPage(e.path,e.name,sessionId)}))}},7560:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var r=a(3340);a(2396);const o=(0,r.xr)((async({app:e,router:t,store:a,Vue:r})=>{a.dispatch("getInitalKeycapsFromDB")}))},2396:(e,t,a)=>{a.d(t,{Z:()=>S});var r={};a.r(r),a.d(r,{auth:()=>c,db:()=>l,fBInit:()=>d});var o={};a.r(o),a.d(o,{createUserWithEmail:()=>u,ensureAuthIsInitialized:()=>g,handleOnAuthStateChanged:()=>m,isAuthenticated:()=>y,logOut:()=>f,loginWithEmail:()=>p,registerUser:()=>h,resetPassword:()=>v});var s={};a.r(s),a.d(s,{addFavoriteKeycapsToUser:()=>U,addUserData:()=>b,docRef:()=>I,getBeginningOfCollection:()=>Z,getCollection:()=>w,getFilteredItemsOfCollection:()=>P,getListFromCollection:()=>F,getNextItemsOfCollection:()=>A,pushItemToCollection:()=>K,removeFavoriteKeycapsToUser:()=>C,storageRef:()=>E,updateItemOnCollection:()=>k});var n={};a.r(n),a.d(n,{getURLRessource:()=>O,putImageToStorage:()=>T});var i=a(5720);a(4479);const c=()=>i.Z.auth(),l=()=>i.Z.firestore(),d=e=>i.Z.initializeApp(e);a(6701);const u=async(e,t)=>i.Z.auth().createUserWithEmailAndPassword(e,t),p=(e,t)=>i.Z.auth().signInWithEmailAndPassword(e,t),h=(e,t)=>i.Z.auth().createUserWithEmailAndPassword(e,t),f=()=>i.Z.auth().signOut(),y=e=>e.state.auth.isAuthenticated,m=async(e,t)=>{e.commit("setAuthState",null!==t),t&&(e.commit("setUserToken",t),await e.dispatch("bindCurrentUser",t.uid))},g=async e=>!!e.state.auth.isReady||new Promise(((e,t)=>{const a=i.Z.auth().onAuthStateChanged((t=>{e(),a()}),(()=>{t(new Error("Looks like there is a problem with the firebase service. Please try again later"))}))})),v=e=>i.Z.auth().sendPasswordResetEmail(e);a(71),a(8043);const b=async(e,t,a)=>i.Z.firestore().collection("users").doc(e).set({name:t,email:a,favoritesKeycaps:[]}),w=async e=>i.Z.firestore().collection(e).get(),K=async(e,t)=>i.Z.firestore().collection(e).add(t),k=async(e,t,a)=>i.Z.firestore().collection(e).doc(t).update(a),Z=async(e,t=15)=>i.Z.firestore().collection(e).orderBy(i.Z.firestore.FieldPath.documentId()).limit(t).get(),A=async(e,t,a=5)=>{if(t)return i.Z.firestore().collection(e).orderBy(i.Z.firestore.FieldPath.documentId()).startAfter(t).limit(a).get()},P=async(e,t)=>{let a=i.Z.firestore().collection(e);for(const o in t){var r;(null===(r=t[o])||void 0===r?void 0:r.length)>0&&(console.log(t[o]),a=a.where(o,"==",t[o]))}return a.get()},U=async(e,t)=>i.Z.firestore().collection("users").doc(e).update({favoritesKeycaps:i.Z.firestore.FieldValue.arrayUnion(t)}),F=async(e,t)=>{const a=[];for(const r of t)i.Z.firestore().collection(e).doc(r).get().then((e=>{let t=e.data();t.id=e.id,a.push(t)}));return a},C=async(e,t)=>i.Z.firestore().collection("users").doc(e).update({favoritesKeycaps:i.Z.firestore.FieldValue.arrayRemove(t)}),I=(e,t)=>i.Z.firestore().collection(e).doc(t),E=e=>i.Z.storage().ref(e);a(1271);const O=async e=>i.Z.storage().ref(e).getDownloadURL(),T=async(e,t)=>i.Z.storage().ref().child(e).put(t),S=Object.assign({},r,o,s,n)},8953:(e,t,a)=>{a.r(t),a.d(t,{default:()=>k});var r=a(3340),o=a(7874);const s={isAuthenticated:!1,uid:null,isReady:!1},n={getAuthStatus:e=>e.isAuthenticated,getUserUID:e=>e.uid},i={async loginUser({commit:e},t){const a=this.$fb,{email:r,password:o}=t;return new Promise((t=>{a.loginWithEmail(r,o).then((a=>{e("setAuthState",null!==a),e("setUserToken",a),console.log("Successfully logged in"),t("/private")})).catch((e=>{console.error(e),t("/")}))}))},async registerUser({commit:e},t){const a=this.$fb,{name:r,email:o,password:s}=t;return new Promise((e=>{a.registerUser(o,s).then((t=>a.addUserData(t.user.uid,r,o).then((()=>{console.log("Account successfully added"),this.loginUser({email:o,password:s}).then((()=>e("/private"))).catch((()=>e("/")))})))).catch((t=>{e("/"),console.error(t)}))}))},async logoutUser({commit:e}){const t=this.$fb;t.logOut().then((t=>{e("destroyUser"),console.log(t)})).catch((e=>{console.log(e)}))}},c={setAuthState(e,t){e.isAuthenticated=t,e.isReady=t},setUserToken(e,t){e.uid=t.uid},destroyUser(e){e.isAuthenticated=!1,e.uid=""}},l={state:s,getters:n,actions:i,mutations:c},d={allKeycaps:[],filteredKeycaps:[],lastKeycapsId:null},u={getAllKeycaps:e=>e.allKeycaps,getLastKeycaps:e=>e.lastKeycapsId,getFavoriteKeycaps:(e,t)=>e.allKeycaps.filter((e=>t.getFavoritesKeycaps.includes(e.id))),getFilteredKeycaps:e=>e.filteredKeycaps,getKeycapsById:e=>t=>e.allKeycaps.filter((e=>e.id==t))[0]},p={async getKeycapsFromDB({commit:e}){const t=this.$fb;e("resetKeycaps"),t.getCollection("keycaps").then((t=>{t.forEach((t=>{const a={id:t.id,data:t.data()};e("addKeycaps",a)}))}))},async getInitalKeycapsFromDB({commit:e}){e("resetKeycaps"),this.$fb.getBeginningOfCollection("keycaps").then((t=>{const a=null===t||void 0===t?void 0:t.docs.length;a>2&&(t.forEach((t=>{const a={id:t.id,data:t.data()};e("addKeycaps",a)})),e("setLastKeycapsVisible",t.docs[a-1].id))}))},async getNextKeycapsFromDB({commit:e,getters:t}){this.$fb.getNextItemsOfCollection("keycaps",t.getLastKeycaps).then((t=>{const a=null===t||void 0===t?void 0:t.docs.length;a>2&&(t.forEach((t=>{const a={id:t.id,data:t.data()};e("addKeycaps",a)})),e("setLastKeycapsVisible",t.docs[a-1].id))}))},async fetchFilteredKeycaps({commit:e},t){e("resetFilteredKeycaps"),this.$fb.getFilteredItemsOfCollection("keycaps",t).then((t=>{const a=null===t||void 0===t?void 0:t.docs.length;a>0&&t.forEach((t=>{const a={id:t.id,data:t.data()};e("addFilteredKeycaps",a)}))}))}},h={addKeycaps(e,t){t.data.id=t.id,e.allKeycaps.push(t.data)},addFilteredKeycaps(e,t){t.data.id=t.id,e.filteredKeycaps.push(t.data)},resetKeycaps(e){e.allKeycaps=[]},resetFilteredKeycaps(e){e.filteredKeycaps=[]},setLastKeycapsVisible(e,t){e.lastKeycapsId=t}},f={state:d,getters:u,actions:p,mutations:h};var y=a(8679),m=a(2396);const g={currentUser:{favoritesKeycaps:[]}},v={getFavoritesKeycaps:e=>e.currentUser.favoritesKeycaps,getAdminStatus:e=>e.currentUser.admin},b={async addKeycapsToFavorties({commit:e,state:t},a){const r=this.$fb,{keycapsUID:o,userUID:s}=a;t.currentUser.favoritesKeycaps.includes(o)?r.removeFavoriteKeycapsToUser(t.currentUser.id,o).then((()=>{e("removeKeycapToFavorite",o),console.log("rempve from your favorites")})):r.addFavoriteKeycapsToUser(t.currentUser.id,o).then((()=>{e("addKeycapToFavorite",o),console.log("add to your favorites")}))},bindCurrentUser:(0,y.ye)((({bindFirestoreRef:e},t)=>e("currentUser",m.Z.docRef("users",t))))},w={addKeycapToFavorite(e,t){e.currentUser.favoritesKeycaps.push(t)},removeKeycapToFavorite(e,t){e.currentUser.favoritesKeycaps=e.currentUser.favoritesKeycaps.filter((e=>e!=t))},setFavoritesKeycaps(e,t){e.currentUser.favoritesKeycaps=t}},K={state:g,getters:v,actions:b,mutations:w},k=(0,r.h)((function(){const e=(0,o.MT)({modules:{auth:l,keycaps:f,user:K},mutations:{...y.nk},strict:!1});return e}))}},t={};function a(r){var o=t[r];if(void 0!==o)return o.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,a),s.exports}a.m=e,(()=>{var e=[];a.O=(t,r,o,s)=>{if(!r){var n=1/0;for(d=0;d<e.length;d++){for(var[r,o,s]=e[d],i=!0,c=0;c<r.length;c++)(!1&s||n>=s)&&Object.keys(a.O).every((e=>a.O[e](r[c])))?r.splice(c--,1):(i=!1,s<n&&(n=s));if(i){e.splice(d--,1);var l=o();void 0!==l&&(t=l)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[r,o,s]}})(),(()=>{a.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return a.d(t,{a:t}),t}})(),(()=>{a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}})(),(()=>{a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,r)=>(a.f[r](e,t),t)),[]))})(),(()=>{a.u=e=>"js/"+e+"."+{380:"d3ceaaa5",396:"2febdab0",400:"8cf34732",475:"2429add2",529:"c406bcd5",577:"d27f3cc3",686:"41003f0d",985:"c334c5eb",990:"fe28ee94",996:"26a2e173"}[e]+".js"})(),(()=>{a.miniCssF=e=>"css/"+({143:"app",736:"vendor"}[e]||e)+"."+{143:"dc9fff7e",529:"abe64b8b",577:"70d06107",686:"4b346ab9",736:"4e028819",985:"46ffe6fb",990:"abe64b8b"}[e]+".css"})(),(()=>{a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={},t="wikeeb:";a.l=(r,o,s,n)=>{if(e[r])e[r].push(o);else{var i,c;if(void 0!==s)for(var l=document.getElementsByTagName("script"),d=0;d<l.length;d++){var u=l[d];if(u.getAttribute("src")==r||u.getAttribute("data-webpack")==t+s){i=u;break}}i||(c=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,a.nc&&i.setAttribute("nonce",a.nc),i.setAttribute("data-webpack",t+s),i.src=r),e[r]=[o];var p=(t,a)=>{i.onerror=i.onload=null,clearTimeout(h);var o=e[r];if(delete e[r],i.parentNode&&i.parentNode.removeChild(i),o&&o.forEach((e=>e(a))),t)return t(a)},h=setTimeout(p.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=p.bind(null,i.onerror),i.onload=p.bind(null,i.onload),c&&document.head.appendChild(i)}}})(),(()=>{a.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{a.p="/"})(),(()=>{var e=(e,t,a,r)=>{var o=document.createElement("link");o.rel="stylesheet",o.type="text/css";var s=s=>{if(o.onerror=o.onload=null,"load"===s.type)a();else{var n=s&&("load"===s.type?"missing":s.type),i=s&&s.target&&s.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=n,c.request=i,o.parentNode.removeChild(o),r(c)}};return o.onerror=o.onload=s,o.href=t,document.head.appendChild(o),o},t=(e,t)=>{for(var a=document.getElementsByTagName("link"),r=0;r<a.length;r++){var o=a[r],s=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(s===e||s===t))return o}var n=document.getElementsByTagName("style");for(r=0;r<n.length;r++){o=n[r],s=o.getAttribute("data-href");if(s===e||s===t)return o}},r=r=>new Promise(((o,s)=>{var n=a.miniCssF(r),i=a.p+n;if(t(n,i))return o();e(r,i,o,s)})),o={143:0};a.f.miniCss=(e,t)=>{var a={529:1,577:1,686:1,985:1,990:1};o[e]?t.push(o[e]):0!==o[e]&&a[e]&&t.push(o[e]=r(e).then((()=>{o[e]=0}),(t=>{throw delete o[e],t})))}})(),(()=>{var e={143:0};a.f.j=(t,r)=>{var o=a.o(e,t)?e[t]:void 0;if(0!==o)if(o)r.push(o[2]);else{var s=new Promise(((a,r)=>o=e[t]=[a,r]));r.push(o[2]=s);var n=a.p+a.u(t),i=new Error,c=r=>{if(a.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var s=r&&("load"===r.type?"missing":r.type),n=r&&r.target&&r.target.src;i.message="Loading chunk "+t+" failed.\n("+s+": "+n+")",i.name="ChunkLoadError",i.type=s,i.request=n,o[1](i)}};a.l(n,c,"chunk-"+t,t)}},a.O.j=t=>0===e[t];var t=(t,r)=>{var o,s,[n,i,c]=r,l=0;if(n.some((t=>0!==e[t]))){for(o in i)a.o(i,o)&&(a.m[o]=i[o]);if(c)var d=c(a)}for(t&&t(r);l<n.length;l++)s=n[l],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(d)},r=self["webpackChunkwikeeb"]=self["webpackChunkwikeeb"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=a.O(void 0,[736],(()=>a(5979)));r=a.O(r)})();