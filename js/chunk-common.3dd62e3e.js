"use strict";(self["webpackChunkwikeeb"]=self["webpackChunkwikeeb"]||[]).push([[64],{9341:(e,t,i)=>{i.d(t,{Z:()=>Z});var a=i(3673),o=i(2323);const l={class:"text-h4 flex justify-center q-my-md"},n={class:"flex justify-center q-my-md"};function s(e,t,i,s,d,c){const r=(0,a.up)("q-input"),m=(0,a.up)("q-select"),p=(0,a.up)("q-file"),u=(0,a.up)("q-step"),h=(0,a.up)("q-icon"),g=(0,a.up)("q-btn"),f=(0,a.up)("q-stepper-navigation"),k=(0,a.up)("q-stepper"),y=(0,a.up)("q-form"),v=(0,a.up)("q-card-section"),b=(0,a.up)("q-card"),w=(0,a.up)("q-dialog");return(0,a.wg)(),(0,a.j4)(w,{ref:"dialog",onHide:c.onDialogHide},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{style:{width:"700px","max-width":"80vw"},class:"q-dialog-plugin"},{default:(0,a.w5)((()=>[(0,a.Wm)(v,null,{default:(0,a.w5)((()=>[(0,a._)("span",l,(0,o.zw)(i.currentKeycaps?"Edit this set !":"Submit a new keycap set"),1),(0,a.Wm)(y,{class:"q-gutter-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{modelValue:s.step,"onUpdate:modelValue":t[10]||(t[10]=e=>s.step=e),ref:"stepper",color:"primary",animated:"",flat:"","alternative-labels":""},{navigation:(0,a.w5)((()=>[(0,a.Wm)(f,{class:"flex justify-end"},{default:(0,a.w5)((()=>[s.step>1?((0,a.wg)(),(0,a.j4)(g,{key:0,flat:"",color:"primary",onClick:t[8]||(t[8]=e=>c.previous()),label:"Back",class:"q-ml-sm"})):(0,a.kq)("",!0),(0,a.Wm)(g,{onClick:t[9]||(t[9]=e=>c.next()),color:"primary",label:2===s.step?"Finish":"Continue"},null,8,["label"])])),_:1})])),default:(0,a.w5)((()=>[(0,a.Wm)(u,{name:1,title:"Basic infos",icon:"settings",done:s.step>1},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{modelValue:c.itemToEdit.name,"onUpdate:modelValue":t[0]||(t[0]=e=>c.itemToEdit.name=e),label:"Name"},null,8,["modelValue"]),(0,a.Wm)(m,{modelValue:c.itemToEdit.brand,"onUpdate:modelValue":t[1]||(t[1]=e=>c.itemToEdit.brand=e),options:d.KeycapConfig.brand,label:"Brand"},null,8,["modelValue","options"]),(0,a.Wm)(m,{modelValue:c.itemToEdit.profile,"onUpdate:modelValue":t[2]||(t[2]=e=>c.itemToEdit.profile=e),options:d.KeycapConfig.profile,label:"Profile"},null,8,["modelValue","options"]),(0,a.Wm)(m,{modelValue:c.itemToEdit.material,"onUpdate:modelValue":t[3]||(t[3]=e=>c.itemToEdit.material=e),options:d.KeycapConfig.material,label:"Material"},null,8,["modelValue","options"]),(0,a.Wm)(m,{modelValue:c.itemToEdit.compatibility,"onUpdate:modelValue":t[4]||(t[4]=e=>c.itemToEdit.compatibility=e),options:d.KeycapConfig.compatibility,label:"Compatibility",multiple:""},null,8,["modelValue","options"]),(0,a.Wm)(m,{modelValue:c.itemToEdit.availability,"onUpdate:modelValue":t[5]||(t[5]=e=>c.itemToEdit.availability=e),options:d.KeycapConfig.availability,label:"Availability"},null,8,["modelValue","options"]),(0,a.Wm)(p,{modelValue:s.filesImages,"onUpdate:modelValue":t[6]||(t[6]=e=>s.filesImages=e),label:"Upload image",multiple:"",accept:".jpg, image/*",onRejected:s.onRejected},null,8,["modelValue","onRejected"])])),_:1},8,["done"]),(0,a.Wm)(u,{name:2,title:"More infos",icon:"create_new_folder",done:s.step>2},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(c.itemToEdit.links,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:t,class:"flex"},[(0,a.Wm)(m,{modelValue:c.itemToEdit.links[t].prefix,"onUpdate:modelValue":e=>c.itemToEdit.links[t].prefix=e,options:c.filteredLinks,class:"q-mr-md"},{prepend:(0,a.w5)((()=>[(0,a.Wm)(h,{name:"language"})])),_:2},1032,["modelValue","onUpdate:modelValue","options"]),(0,a.Wm)(r,{class:"col",modelValue:c.itemToEdit.links[t].link,"onUpdate:modelValue":e=>c.itemToEdit.links[t].link=e,label:"URL"},null,8,["modelValue","onUpdate:modelValue"]),(0,a.Wm)(g,{rounded:"",flat:"",color:"primary",icon:"close",onClick:e=>c.removeLink(t)},null,8,["onClick"])])))),128)),(0,a._)("div",n,[(0,a.Wm)(g,{round:"",color:"primary",icon:"add",onClick:t[7]||(t[7]=e=>c.addLink())})])])),_:1},8,["done"])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["onHide"])}i(71),i(7965),i(6016);var d=i(9587),c=i(8825),r=i(1959),m=i(2396);const p={props:{currentKeycaps:{type:Object,default:null}},data(){return{KeycapConfig:d,keycapToAdd:{name:"",brand:"",profile:"",material:"",availability:[],compatibility:[],image:"",links:[{prefix:"GeekHack",link:""}]}}},emits:["ok","hide"],setup(){const e=(0,c.Z)();return{step:(0,r.iH)(1),filesImages:(0,r.iH)(null),filesMaxSize:(0,r.iH)(null),filesMaxTotalSize:(0,r.iH)(null),filesMaxNumber:(0,r.iH)(null),onRejected(t){e.notify({type:"negative",message:`${t.length} file(s) did not pass validation constraints`})}}},computed:{filteredLinks(){return this.KeycapConfig.links.map((e=>e.name))},itemToEdit(){return this.currentKeycaps?this.currentKeycaps:this.keycapToAdd}},methods:{next(){2==this.step?this.onOKClick():this.step++},addLink(){this.itemToEdit.links.push({prefix:"",link:""})},removeLink(e){this.itemToEdit.links.splice(e,1)},previous(){this.step--},show(){this.$refs.dialog.show()},hide(){this.$refs.dialog.hide()},onDialogHide(){this.$emit("hide")},onOKClick(){this.uploadImg(),this.$emit("ok"),this.hide()},onCancelClick(){this.hide()},uploadImg(){if(this.currentKeycaps)if(console.log("edit a keycap"),this.filesImages){console.log("has keycap");const e=1e3,t=500,i="image/jpeg",a=.7,o=URL.createObjectURL(this.filesImages[0]),l=new Image;l.src=o,l.onerror=function(){URL.revokeObjectURL(this.src),console.error("Cannot load image")},l.onload=()=>{URL.revokeObjectURL(this.src);const[o,n]=this.calculateSize(l,e,t),s=document.createElement("canvas");s.width=o,s.height=n;const d=s.getContext("2d");d.drawImage(l,0,0,o,n),s.toBlob((e=>{m.Z.putImageToStorage("keycaps/"+this.filesImages[0].name,e).then((e=>{m.Z.getURLRessource(e.metadata.fullPath).then((e=>{this.itemToEdit.image=e,m.Z.updateItemOnCollection("keycaps",this.itemToEdit.id,this.itemToEdit)}))})).catch((e=>{console.error(e)}))}),i,a)}}else console.log("has no keycap"),m.Z.updateItemOnCollection("keycaps",this.itemToEdit.id,this.itemToEdit);else{console.log("add a keycap");const e=1e3,t=500,i="image/jpeg",a=.7,o=URL.createObjectURL(this.filesImages[0]),l=new Image;l.src=o,l.onerror=function(){URL.revokeObjectURL(this.src),console.error("Cannot load image")},l.onload=()=>{URL.revokeObjectURL(this.src);const[o,n]=this.calculateSize(l,e,t),s=document.createElement("canvas");s.width=o,s.height=n;const d=s.getContext("2d");d.drawImage(l,0,0,o,n),s.toBlob((e=>{m.Z.putImageToStorage("keycaps/"+this.filesImages[0].name,e).then((e=>{m.Z.getURLRessource(e.metadata.fullPath).then((e=>{this.itemToEdit.image=e,m.Z.pushItemToCollection("keycaps",this.itemToEdit)}))})).catch((e=>{console.error(e)}))}),i,a)}}},calculateSize(e,t,i){let a=e.width,o=e.height;return a>o?a>t&&(o=Math.round(o*t/a),a=t):o>i&&(a=Math.round(a*i/o),o=i),[a,o]}}};var u=i(4260),h=i(4390),g=i(151),f=i(5589),k=i(5269),y=i(3518),v=i(4340),b=i(4689),w=i(6819),U=i(1052),C=i(4554),T=i(8240),E=i(118),I=i(7518),S=i.n(I);const V=(0,u.Z)(p,[["render",s]]),Z=V;S()(p,"components",{QDialog:h.Z,QCard:g.Z,QCardSection:f.Z,QForm:k.Z,QStepper:y.Z,QStep:v.Z,QInput:b.Z,QSelect:w.Z,QFile:U.Z,QIcon:C.Z,QBtn:T.Z,QStepperNavigation:E.Z})},4721:(e,t,i)=>{i.d(t,{Z:()=>v});i(71);var a=i(3673),o=i(2323);const l={class:"absolute-bottom"};function n(e,t,i,n,s,d){const c=(0,a.up)("q-btn"),r=(0,a.up)("q-card-section"),m=(0,a.up)("q-chip"),p=(0,a.up)("q-space"),u=(0,a.up)("q-img"),h=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(h,{class:"keycaps-card"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{class:"flex items-center justify-between q-py-sm q-px-md"},{default:(0,a.w5)((()=>[(0,a._)("span",{onClick:t[0]||(t[0]=(...e)=>d.sendToDetails&&d.sendToDetails(...e)),class:"title"},(0,o.zw)(i.item.name),1),(0,a.Wm)(c,{flat:"",round:"",color:d.isFavorite?"negative":"favorite",style:(0,o.j5)(d.isFavorite?"":"opacity:.3"),icon:"favorite",onClick:t[1]||(t[1]=e=>d.favorite())},null,8,["color","style"])])),_:1}),(0,a.Wm)(u,{src:i.item.image,class:"card-image",onClick:d.sendToDetails},{default:(0,a.w5)((()=>[(0,a._)("div",l,[(0,a.Wm)(m,{size:"12px",color:"primary"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(i.item.material),1)])),_:1}),(0,a.Wm)(m,{size:"12px",color:"secondary"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(i.item.profile),1)])),_:1}),(0,a.Wm)(p),(0,a.Wm)(m,{size:"12px",color:d.availabilityColor},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(i.item.availability),1)])),_:1},8,["color"])])])),_:1},8,["src","onClick"])])),_:1})}var s=i(7874);const d={props:{item:{type:Object}},methods:{...(0,s.nv)(["addKeycapsToFavorties"]),favorite(){this.getAuthStatus?this.addKeycapsToFavorties({keycapsUID:this.item.id,userUID:this.getUserUID}):this.$router.push({name:"login"})},sendToDetails(){this.$router.push({name:"keycaps-details",params:{id:this.item.id}})}},computed:{...(0,s.Se)(["getAuthStatus","getUserUID","getFavoritesKeycaps"]),availabilityColor(){switch(this.item.availability){case"GB-Ended":return"negative";case"GB-Live":return"positive";case"GB-Upcoming":return"warning";case"In-Stock":return"positive";case"Interest Check":return"info";default:return"dark"}},isFavorite(){return this.getFavoritesKeycaps.includes(this.item.id)}}};var c=i(4260),r=i(151),m=i(5589),p=i(8240),u=i(4027),h=i(7030),g=i(2025),f=i(7518),k=i.n(f);const y=(0,c.Z)(d,[["render",n],["__scopeId","data-v-5f87533a"]]),v=y;k()(d,"components",{QCard:r.Z,QCardSection:m.Z,QBtn:p.Z,QImg:u.Z,QChip:h.Z,QSpace:g.Z})},9587:e=>{e.exports=JSON.parse('{"profile":["Cherry","OEM","SA","MT3","NP","DSA","XDA","KAT","KAM","Unknown"],"material":["ABS","PBT","Aluminium","Brass","Unknown"],"brand":["GMK","Signature Plastic","Keyreative","EnjoyPBT","Unknown"],"availability":["IC","GB-Live","GB-Ended","In-stock","Sold out"],"compatibility":["ISO-UK","ANSI-US","ISO-FR","ISO-DE","ISO-CH"],"links":[{"name":"GeekHack","icon":"Geekhack.svg"},{"name":"Reddit","icon":"Reddit.svg"},{"name":"Worldwide","icon":"worldwide.svg"},{"name":"EU","icon":"union-europeenne.svg"},{"name":"CA","icon":"canada.svg"},{"name":"CN","icon":"chine.svg"},{"name":"JP","icon":"japon.svg"},{"name":"OCE","icon":"australie.svg"},{"name":"UK","icon":"royaume-uni.svg"},{"name":"US","icon":"etats-unis.svg"}]}')}}]);